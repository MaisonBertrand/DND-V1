import{r as n,j as e,b as K,u as O,d as Q,s as X,g as Z,e as _,f as ee,h as D,i as se,k as ae,m as re,n as te,p as S}from"./index-c208d5f4.js";function B(){const[d,r]=n.useState(!1),[b,g]=n.useState(""),f=async()=>{r(!0),g("");const j=await K();j.error?g(`Error: ${j.error}`):g("Verification email sent! Please check your inbox."),r(!1)};return e.jsx("div",{className:"bg-amber-900/20 border border-amber-600 text-amber-200 px-4 py-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-lg",children:"âš ï¸"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium mb-2",children:"Email Verification Required"}),e.jsx("p",{className:"text-sm mb-3",children:"Please verify your email address to access all features. Check your inbox for a verification link."}),b&&e.jsx("div",{className:`text-sm mb-3 ${b.includes("Error")?"text-red-300":"text-green-300"}`,children:b}),e.jsx("button",{onClick:f,disabled:d,className:"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1 rounded text-sm font-medium disabled:opacity-50",children:d?"Sending...":"Resend Verification Email"})]})]})})}function le(){const d=O(),{user:r,loading:b,needsEmailVerification:g}=Q(),[f,j]=n.useState(null),[k,N]=n.useState([]),[P,U]=n.useState([]),[T,M]=n.useState({}),[L,V]=n.useState({}),[m,x]=n.useState(!0),[y,E]=n.useState(!1),[H,w]=n.useState(!1),[C,A]=n.useState(""),[h,u]=n.useState({name:"",description:"",maxPlayers:6,isPublic:!1,inviteCode:"",campaignType:"ai-assist"}),p=Array.isArray(k)?k.filter(s=>s&&s.id):[];n.useEffect(()=>{b||(r?v(r.uid):d("/login"))},[r,b,d]),n.useEffect(()=>{if(!(r!=null&&r.uid)||!p.length||y)return;const s=p.filter(i=>i&&i.id);if(s.length===0)return;const a=s.map(i=>!i||!i.id?null:X(i.id,l=>{!l||!l.id||y||(N(t=>t.filter(c=>c&&c.id).map(c=>c.id===l.id?l:c)),z([l]))})).filter(Boolean);return()=>{a.forEach(i=>{typeof i=="function"&&i()})}},[r==null?void 0:r.uid,k.length,y]);const v=async s=>{try{const a=await Z(s);j(a);const l=(await _(s)).filter(t=>t&&t.id);await z(l),N(l),await W()}catch(a){console.error("Error loading user data:",a),N([]),M({})}finally{x(!1)}},W=async()=>{try{const a=(await ee()).filter(i=>{var l;return!((l=i.members)!=null&&l.includes(r==null?void 0:r.uid))});U(a),await $(a)}catch(s){console.error("Error loading public parties:",s.message)}},z=async s=>{try{if(!s||!Array.isArray(s))return;const a=new Set;if(s.forEach(t=>{t&&t.members&&Array.isArray(t.members)&&t.members.forEach(o=>a.add(o))}),a.size===0)return;const i=await D(Array.from(a)),l={};i.forEach(t=>{t&&t.userId&&(l[t.userId]=t)}),M(l)}catch(a){console.error("Error loading party member profiles:",a)}},$=async s=>{try{if(!s||!Array.isArray(s))return;const a=new Set;if(s.forEach(t=>{t&&t.members&&Array.isArray(t.members)&&t.members.forEach(o=>a.add(o))}),a.size===0)return;const i=await D(Array.from(a)),l={};i.forEach(t=>{t&&t.userId&&(l[t.userId]=t)}),V(l)}catch(a){console.error("Error loading public party member profiles:",a)}},I=async s=>{try{if(!s){console.error("Invalid party ID for deletion");return}E(!0),x(!0),N(a=>a.filter(i=>i&&i.id!==s)),await se(s,r.uid),await v(r.uid)}catch(a){console.error("Error deleting party:",a),await v(r.uid)}finally{x(!1),E(!1)}},J=async s=>{try{if(!(r!=null&&r.uid)){alert("User not authenticated. Please log in again.");return}if(!s){alert("Invalid party information.");return}const a=p.find(l=>l.id===s);if(!a){alert("Party not found.");return}await ae(r.uid,s)?a.campaignType==="ai-assist"?d(`/campaign/${s}`):a.dmId===r.uid?d(`/manual-campaign-dm/${s}`):d(`/manual-campaign/${s}`):d(`/character-creation/${s}`)}catch(a){console.error("Error in handleContinueCampaign:",a),d(`/character-creation/${s}`)}},F=async s=>{if(s.preventDefault(),!r){console.error("You must be logged in to create a party");return}x(!0);try{const a={...h,inviteCode:Math.random().toString(36).substr(2,8).toUpperCase()},i=await re(r.uid,a);w(!1),u({name:"",description:"",maxPlayers:6,isPublic:!1,inviteCode:"",campaignType:"ai-assist"}),await v(r.uid)}catch(a){console.error("Error creating party:",a.message)}finally{x(!1)}},R=async()=>{if(!C.trim()){console.error("Please enter an invite code");return}if(!r){console.error("You must be logged in to join a party");return}x(!0);try{const s=await te(C.toUpperCase());if(!s){alert("Invalid invite code. Please check the code and try again.");return}await S(s.id,r.uid),A(""),await v(r.uid)}catch(s){console.error("Error joining party:",s),alert(s.message||"Error joining party. Please try again.")}finally{x(!1)}},Y=async s=>{if(!r){console.error("You must be logged in to join a party");return}x(!0);try{await S(s,r.uid),await v(r.uid)}catch(a){console.error(a.message||"Error joining party. Please try again.")}finally{x(!1)}},q=()=>f!=null&&f.username?f.username:r!=null&&r.displayName?r.displayName:r!=null&&r.email?r.email.split("@")[0]:"Adventurer";return m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-amber-400 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-slate-300 text-lg font-medium",children:y?"Deleting campaign...":"Loading your adventures..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e.jsxs("div",{className:"fantasy-container",children:[g&&e.jsx(B,{}),e.jsxs("div",{className:"mb-8 sm:mb-12",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-400 to-amber-500 mb-4 leading-relaxed pb-2",children:"Campaign Dashboard"}),e.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-amber-400 to-orange-400 mx-auto rounded-full"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-slate-300 text-lg sm:text-xl",children:["Welcome back, ",e.jsx("span",{className:"text-amber-400 font-semibold",children:q()}),"!"]}),e.jsx("p",{className:"text-slate-400 mt-2 text-sm sm:text-base",children:"Create, join, and manage your D&D campaigns"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mb-8 sm:mb-12",children:[e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/20 p-6 hover:from-amber-500/20 hover:to-orange-500/20 transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-amber-500/20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 to-orange-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h3",{className:"text-xl font-bold text-slate-100",children:"Create New Campaign"})]}),e.jsx("p",{className:"text-slate-300 mb-6 text-sm leading-relaxed",children:"Start a new campaign and invite friends to join your adventures."}),e.jsx("button",{onClick:()=>w(!0),className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",disabled:m,children:"Create Campaign"})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-600/10 to-slate-500/10 border border-slate-500/20 p-6 hover:from-slate-600/20 hover:to-slate-500/20 transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-slate-500/20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-600/5 to-slate-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-600 to-slate-500 rounded-lg flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-slate-100",children:"Join Campaign"})]}),e.jsx("p",{className:"text-slate-300 mb-6 text-sm leading-relaxed",children:"Join an existing campaign using an invite code."}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter invite code",value:C,onChange:s=>A(s.target.value),className:"flex-1 bg-slate-700/50 border border-slate-600/50 text-slate-200 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50",disabled:m}),e.jsx("button",{onClick:R,className:"bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-700 hover:to-slate-600 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",disabled:m,children:m?"Joining...":"Join"})]})]})]})]}),H&&e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-800/50 to-slate-700/50 border border-slate-600/50 backdrop-blur-sm mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 to-orange-500/5"}),e.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Create New Campaign"})]}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-200 mb-4",children:"Campaign Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`relative cursor-pointer rounded-xl border-2 p-4 transition-all duration-300 ${h.campaignType==="ai-assist"?"border-amber-500 bg-amber-500/10":"border-slate-600 bg-slate-700/30 hover:border-slate-500"}`,onClick:()=>u(s=>({...s,campaignType:"ai-assist"})),children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mr-3 ${h.campaignType==="ai-assist"?"bg-amber-500":"bg-slate-600"}`,children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h3",{className:"font-semibold text-slate-100",children:"AI Assist"})]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"AI-powered storytelling with dynamic encounters, NPCs, and story generation. Perfect for immersive adventures."})]}),e.jsxs("div",{className:`relative cursor-pointer rounded-xl border-2 p-4 transition-all duration-300 ${h.campaignType==="manual"?"border-amber-500 bg-amber-500/10":"border-slate-600 bg-slate-700/30 hover:border-slate-500"}`,onClick:()=>u(s=>({...s,campaignType:"manual"})),children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mr-3 ${h.campaignType==="manual"?"bg-amber-500":"bg-slate-600"}`,children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("h3",{className:"font-semibold text-slate-100",children:"Manual Campaign"})]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"Traditional D&D experience with manual story creation. No AI dependencies - full control over your campaign."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"party-name",className:"block text-sm font-semibold text-slate-200 mb-2",children:"Campaign Name"}),e.jsx("input",{id:"party-name",type:"text",value:h.name,onChange:s=>u(a=>({...a,name:s.target.value})),className:"w-full bg-slate-700/50 border border-slate-600/50 text-slate-200 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-players",className:"block text-sm font-semibold text-slate-200 mb-2",children:"Max Players"}),e.jsx("input",{id:"max-players",type:"number",min:"2",max:"10",value:h.maxPlayers,onChange:s=>u(a=>({...a,maxPlayers:parseInt(s.target.value)})),className:"w-full bg-slate-700/50 border border-slate-600/50 text-slate-200 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"party-theme",className:"block text-sm font-semibold text-slate-200 mb-2",children:"Theme & Description"}),e.jsx("textarea",{id:"party-theme",value:h.description,onChange:s=>u(a=>({...a,description:s.target.value})),className:"w-full bg-slate-700/50 border border-slate-600/50 text-slate-200 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50",rows:"3",placeholder:"Enter the theme or atmosphere for your campaign..."})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:h.isPublic,onChange:s=>u(a=>({...a,isPublic:s.target.checked})),className:"w-4 h-4 text-amber-500 bg-slate-700 border-slate-600 rounded focus:ring-amber-500/50 focus:ring-2"}),e.jsx("label",{htmlFor:"isPublic",className:"ml-2 text-sm font-medium text-slate-300",children:"Public Campaign (visible to all users)"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",disabled:m,children:m?"Creating...":"Create Campaign"}),e.jsx("button",{type:"button",onClick:()=>w(!1),className:"bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-700 hover:to-slate-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",disabled:m,children:"Cancel"})]})]})]})]}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-800/50 to-slate-700/50 border border-slate-600/50 backdrop-blur-sm mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 to-orange-500/5"}),e.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"My Campaigns"})]}),p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-600 to-slate-700 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:"No Campaigns Yet"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Create your first campaign to start adventuring!"}),e.jsx("button",{onClick:()=>w(!0),className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold py-3 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Create Your First Campaign"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map(s=>{var a;return e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-700/50 to-slate-600/50 border border-slate-500/50 p-6 hover:from-slate-700/70 hover:to-slate-600/70 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 to-orange-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-2 group-hover:text-amber-400 transition-colors duration-300",children:s.name}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-3",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs sm:text-sm text-slate-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),((a=s.members)==null?void 0:a.length)||0," members"]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.campaignType==="ai-assist"?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-slate-600/20 text-slate-300 border border-slate-500/30"}`,children:s.campaignType==="ai-assist"?"ðŸ¤– AI Assist":"âœï¸ Manual"})}),s.members&&s.members.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"max-w-xs truncate",children:s.members.map((i,l)=>{const t=T[i];let o="Unknown";return t!=null&&t.username?o=t.username:t!=null&&t.displayName?o=t.displayName:t!=null&&t.email&&(o=t.email.split("@")[0]),e.jsxs("span",{children:[o,l<s.members.length-1?", ":""]},i)})})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>J(s.id),className:"flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue"]}),s.dmId===(r==null?void 0:r.uid)&&e.jsxs("button",{onClick:()=>I(s.id),className:"flex-1 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-700 hover:to-slate-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]}),s.dmId===(r==null?void 0:r.uid)&&s.inviteCode&&e.jsx("div",{className:"mt-4 p-3 bg-slate-700/30 rounded-lg border border-slate-600/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Invite Code:"}),e.jsx("span",{className:"text-sm font-mono text-amber-400 bg-slate-800 px-2 py-1 rounded select-all",children:s.inviteCode})]})})]})]},s.id)})})]})]}),P.length>0&&e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-800/50 to-slate-700/50 border border-slate-600/50 backdrop-blur-sm mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-500/5 to-slate-400/5"}),e.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-600 to-slate-500 rounded-lg flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Public Campaigns"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:P.map(s=>{var a,i;return L[s.id],e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-slate-700/50 to-slate-600/50 border border-slate-500/50 p-6 hover:from-slate-700/70 hover:to-slate-600/70 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-500/5 to-slate-400/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-100 group-hover:text-slate-300 transition-colors duration-300",children:s.name}),e.jsxs("span",{className:"text-sm text-slate-400 bg-slate-600/50 px-2 py-1 rounded-full",children:[((a=s.members)==null?void 0:a.length)||1,"/",s.maxPlayers," players"]})]}),s.description&&e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-4",children:s.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-200 mb-2 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Members"]}),e.jsx("div",{className:"space-y-1",children:(i=s.members)==null?void 0:i.map((l,t)=>{const o=L[l];let c=`User ${t+1}`;o!=null&&o.username?c=o.username:o!=null&&o.displayName?c=o.displayName:o!=null&&o.email&&(c=o.email.split("@")[0]);const G=l===s.dmId;return e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-slate-300",children:c}),G&&e.jsx("span",{className:"bg-gradient-to-r from-slate-600 to-slate-500 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"DM"})]})},l)})})]}),e.jsx("button",{onClick:()=>Y(s.id),className:"w-full bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-700 hover:to-slate-600 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",disabled:m,children:"Join Campaign"})]})]},s.id)})})]})]})]}),g&&e.jsx(B,{})]})}export{le as default};
